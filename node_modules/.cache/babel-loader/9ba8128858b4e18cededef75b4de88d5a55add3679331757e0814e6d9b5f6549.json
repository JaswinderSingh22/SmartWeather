{"ast":null,"code":"import { ref, watchEffect } from 'vue';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'SearchBar',\n  setup() {\n    const searchQuery = ref('');\n    const results = ref([]);\n    const store = useStore();\n\n    //   const fetchResults = async () => {\n    //   if (searchQuery.value.trim() === '') {\n    //     results.value = [];\n    //     return;\n    //   }\n    //   const apiKey = 'AIzaSyCOauRVg5VwBP52O13dnJS6lWn1_xineK8';\n    //   const apiUrl = `https://maps.googleapis.com/maps/api/geocode/json?address=${searchQuery.value}&key=${apiKey}`;\n\n    //   try {\n    //     const response = await fetch(apiUrl);\n    //     const data = await response.json();\n    //     console.log(\"response11:\", data);\n    //     if (data.status === 'OK') {\n    //       results.value = data.results.map((result) => {\n    //         console.log(\"results.value:\", result);\n    //         return {\n    //           id: result.place_id,\n    //           name: result.address_components[0].long_name,\n    //           country: result.address_components.find(\n    //             (component) => component.types.includes('country')\n    //               ).long_name,\n    //           latitude: result.geometry.location.lat,\n    //           longitude: result.geometry.location.lng,\n    //         };\n    //       });\n\n    //     } else {\n    //       results.value = [];\n    //       // clearSearchResults();\n    //     }\n    //   }\n    //   catch (error) {\n    //     console.error('Error fetching search results:', error);\n    //     results.value = [];\n    //   }\n    // };\n\n    const selectResult = result => {\n      store.commit('selectCity', result);\n      results.value = [];\n      // clearSearchResults();\n    };\n\n    // const clearSearchResults=()=> {\n    //   store.dispatch('clearSearchResults');\n    // };\n\n    // Close dropdown when clicking outside\n    watchEffect(() => {\n      const closeDropdown = event => {\n        if (!event.target.closest('.relative')) {\n          results.value = [];\n          // clearSearchResults();\n        }\n      };\n\n      document.addEventListener('click', closeDropdown);\n      return () => {\n        document.removeEventListener('click', closeDropdown);\n      };\n    });\n    return {\n      searchQuery,\n      results,\n      fetchResults,\n      selectResult\n    };\n  }\n};","map":{"version":3,"names":["ref","watchEffect","useStore","name","setup","searchQuery","results","store","selectResult","result","commit","value","closeDropdown","event","target","closest","document","addEventListener","removeEventListener","fetchResults"],"sources":["/Users/turbanator/Documents/CODING/SmartWeather/src/components/SearchBar.vue"],"sourcesContent":["<template>\n    <div class=\"flex justify-center\">\n      <div class=\"relative w-6/12\">\n        <input v-model=\"searchQuery\" @input=\"fetchResults\" placeholder=\"Enter city or country\"\n             class=\"py-2 px-4 border border-gray-200 rounded-lg  w-full min-w-fit\">\n      </div>\n      {{ results.length }}\n      <ul v-if=\"results.length\"\n          class=\"absolute z-10 mt-10 w-6/12 bg-grey rounded-md shadow-lg overflow-hidden\">\n        <li v-for=\"result in results\" :key=\"result.id\" @click=\"selectResult(result)\"\n            class=\"py-2 cursor-pointer bg-blue-200 hover:bg-blue-300\">{{ result.name }}, {{ result.country }}</li>\n      {{ results }}\n\n      </ul>\n    </div>\n  </template>\n  \n  <script>\n  import { ref , watchEffect} from 'vue';\n  import { useStore } from 'vuex';\n  \n  export default {\n    name: 'SearchBar',\n    setup() {\n      const searchQuery = ref('');\n      const results = ref([]);\n      const store = useStore();\n  \n    //   const fetchResults = async () => {\n    //   if (searchQuery.value.trim() === '') {\n    //     results.value = [];\n    //     return;\n    //   }\n    //   const apiKey = 'AIzaSyCOauRVg5VwBP52O13dnJS6lWn1_xineK8';\n    //   const apiUrl = `https://maps.googleapis.com/maps/api/geocode/json?address=${searchQuery.value}&key=${apiKey}`;\n\n    //   try {\n    //     const response = await fetch(apiUrl);\n    //     const data = await response.json();\n    //     console.log(\"response11:\", data);\n    //     if (data.status === 'OK') {\n    //       results.value = data.results.map((result) => {\n    //         console.log(\"results.value:\", result);\n    //         return {\n    //           id: result.place_id,\n    //           name: result.address_components[0].long_name,\n    //           country: result.address_components.find(\n    //             (component) => component.types.includes('country')\n    //               ).long_name,\n    //           latitude: result.geometry.location.lat,\n    //           longitude: result.geometry.location.lng,\n    //         };\n    //       });\n\n    //     } else {\n    //       results.value = [];\n    //       // clearSearchResults();\n    //     }\n    //   }\n    //   catch (error) {\n    //     console.error('Error fetching search results:', error);\n    //     results.value = [];\n    //   }\n    // };\n  \n    const selectResult = (result) => {\n      store.commit('selectCity', result);\n      results.value = [];\n      // clearSearchResults();\n    };\n\n    // const clearSearchResults=()=> {\n    //   store.dispatch('clearSearchResults');\n    // };\n\n  // Close dropdown when clicking outside\n    watchEffect(() => {\n      const closeDropdown = (event) => {\n        if (!event.target.closest('.relative')) {\n          results.value = [];\n          // clearSearchResults();\n        }\n      };\n\n      document.addEventListener('click', closeDropdown);\n\n      return () => {\n        document.removeEventListener('click', closeDropdown);\n      };\n    });\n    return { searchQuery, results, fetchResults, selectResult };\n  },\n  };\n  </script>\n  "],"mappings":"AAkBE,SAASA,GAAE,EAAIC,WAAW,QAAO,KAAK;AACtC,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAKA,CAAA,EAAG;IACN,MAAMC,WAAU,GAAIL,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMM,OAAM,GAAIN,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMO,KAAI,GAAIL,QAAQ,CAAC,CAAC;;IAE1B;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,MAAMM,YAAW,GAAKC,MAAM,IAAK;MAC/BF,KAAK,CAACG,MAAM,CAAC,YAAY,EAAED,MAAM,CAAC;MAClCH,OAAO,CAACK,KAAI,GAAI,EAAE;MAClB;IACF,CAAC;;IAED;IACA;IACA;;IAEF;IACEV,WAAW,CAAC,MAAM;MAChB,MAAMW,aAAY,GAAKC,KAAK,IAAK;QAC/B,IAAI,CAACA,KAAK,CAACC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,EAAE;UACtCT,OAAO,CAACK,KAAI,GAAI,EAAE;UAClB;QACF;MACF,CAAC;;MAEDK,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEL,aAAa,CAAC;MAEjD,OAAO,MAAM;QACXI,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEN,aAAa,CAAC;MACtD,CAAC;IACH,CAAC,CAAC;IACF,OAAO;MAAEP,WAAW;MAAEC,OAAO;MAAEa,YAAY;MAAEX;IAAa,CAAC;EAC7D;AACA,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}